function VerticleBlocks(t){this.settings=this.extend(this.defaultSettings(),t),this.columns=1,this.$container=document.querySelector(this.settings.classname.container),this.$blocks=this.getBlocks(),this.numberOfBlocks=0,this.loadingBlocks=!1,this.imageLoadTimer=null,this.bwbp=[],this.init()}VerticleBlocks.prototype.containerUpdated=function(){var t=this;setInterval(function(){var e=t.getBlocks().length;e!==t.numberOfBlocks&&(t.loadingBlocks||(t.loadingBlocks=!0,t.htmlModified()))},100)},VerticleBlocks.prototype.init=function(){this.setUpBreakPoints(),this.settings.listenForContainer?this.containerUpdated():this.settings.imageLoader?this.loadImages():this.updateColumn(this.getWidth())},VerticleBlocks.prototype.htmlModified=function(){console.log("htmlModified"),this.$blocks=this.getBlocks(),console.log("htmlModified",this.numberOfBlocks,this.$blocks.length),this.numberOfBlocks===this.$blocks.length?this.setup():0===this.$blocks.length?(this.numberOfBlocks=0,this.loadingBlocks=!1):this.settings.imageLoader?this.loadImages():(this.numberOfBlocks=this.$blocks.length,console.log("IMAGE LOADER OFF"),this.updateColumn(this.getWidth()))},VerticleBlocks.prototype.loadImages=function(){var t,e=this,o=0,i=this.$blocks.length,s=this.numberOfBlocks,n="";for(o=this.numberOfBlocks;i>o;o+=1)t=this.$blocks[o].querySelector("img"),t?(n=String(t.src),t.onload=null,t.onerror=null,t.src="",t.onload=function(t){s=e.imagesLoaded(s,i,"Loaded")},t.onerror=function(t){s=e.imagesLoaded(s,i,"Error")},t.src=n):s=e.imagesLoaded(s,i,"None");this.numberOfBlocks=this.$blocks.length},VerticleBlocks.prototype.imagesLoaded=function(t,e,o){return t+=1,t===e&&this.updateColumn(this.getWidth()),t},VerticleBlocks.prototype.resetValues=function(){var t=0,e=this.$blocks.length;for(t=0;e>t;t+=1)this.$blocks[t].style.top="0px"},VerticleBlocks.prototype.rowMaxHeight=function(t,e,o){var i=0,s=[];for(t=0;e>t;t+=1)i=Math.floor(t/this.columns),s[i]=s[i]||s.push(0),s[i]=o[t].clientHeight>s[i]?o[t].clientHeight:s[i];return s},VerticleBlocks.prototype.createColumnsArray=function(t,e,o){var i,s=0,n=[],l=0,r=0;for(t=0;e>t;t+=1)n[s]=n[s]||[],i=window.getComputedStyle(o[t],null),l=i.marginTop?parseFloat(i.marginTop)+parseFloat(i.marginBottom):0,r=parseFloat("Number"==typeof parseFloat(i.height)?i.height:i.getPropertyValue("height")),n[s].push({height:r,ele:o[t],margin:l}),s=s>this.columns-2?0:s+=1;return n},VerticleBlocks.prototype.getAbsoluteHeight=function(t){var e=0,o=0,i=0,s=0,n=0;for(o=0;o<this.columns;o+=1){for(s=t[o].length,i=0,e=0;s>e;e+=1)i+=t[o][e].height+t[o][e].margin;i>n&&(n=i)}this.$container.style.height=n+"px"},VerticleBlocks.prototype.updateBlocks=function(){this.$blocks=this.getBlocks(),this.loadingBlocks||(this.loadingBlocks=!0,this.setup())},VerticleBlocks.prototype.getBlocks=function(){return this.$container.querySelectorAll(this.settings.classname.block)},VerticleBlocks.prototype.setup=function(){this.resetValues();var t=0,e=0,o=this.$blocks.length,i=this.rowMaxHeight(t,o,this.$blocks),s=this.createColumnsArray(t,o,this.$blocks);for(this.getAbsoluteHeight(s),e=0;e<this.columns;e+=1){for(o=s[e].length,t=0;o>t;t+=1)t>0&&(s[e][t].ele.style.top=s[e][t-1].height-i[t-1]+"px",s[e][t].height=s[e][t].height+(s[e][t-1].height-i[t-1])),s[e][t].ele.style.opacity="1";this.loadingBlocks=!1}},VerticleBlocks.prototype.getWidth=function(){var t=window,e="inner";return"innerWidth"in window||(e="client",t=document.documentElement||document.body),t[e+"Width"]},VerticleBlocks.prototype.setUpBreakPoints=function(){var t=this.settings,e=0,o=t.breakPoints.length,i=0,s=0;for(e=0;o>e;e+=1)i=t.breakPoints[e].position,s=o>e+1?t.breakPoints[e+1].position-1:1e4,this.bwbp.push([i,s,t.breakPoints[e].columns])},VerticleBlocks.prototype.updateColumn=function(t){var e=0;for(e=0;e<this.bwbp.length;e+=1)if(t>=this.bwbp[e][0]&&t<this.bwbp[e][1]){this.columns=this.bwbp[e][2],this.setup();break}this.browserResize()},VerticleBlocks.prototype.browserResize=function(){var t=this;window.onresize=function(){t.numberOfBlocks>0&&t.updateColumn(t.getWidth())}},VerticleBlocks.prototype.extend=function(t,e){var o=t;return Object.keys(e).forEach(function(t){o[t]=e[t]}),o},VerticleBlocks.prototype.defaultSettings=function(){return{listenForContainer:!0,imageLoader:!0,classname:{container:".container",block:".box"},breakPoints:[{position:0,columns:1},{position:480,columns:2},{position:1024,columns:3},{position:1280,columns:4}]}};